!function(){"use strict";function n(_){return"v("+_+");"}function r(_){return"u("+_+");"}function t(_){return(1 in _?"p(s,'":"s('")+_.join("','")+"')"}function e(_){return"c('"+_+"',s);"}function i(_){return _.replace(/[<>"'&\/]/g,c)}function c(_){return"&#"+_.charCodeAt(0)+";"}function o(_){return(_=_.replace(/'/g,"\\'"))?r("'"+_+"'"):""}function u(n,r){var _=new RegExp("(.*?)"+n+" *((?:([=&!#^>/]) *)?([\\S\\s]*?) *?(=)?) *"+r,"ig");return _.lastIndex=this,_}function a(_,n){if("."===_[0]){if(n)return"$";throw new Error("Not in section")}return t(_.split("."))}function f(t){var i,c,f=u.call(0,"{{","}}"),l=[],s=0,$=0,p=["var _=this,r='',y=r.replace","a=Array.prototype.slice","t=Object.prototype.toString","e=function($){return y.call($,/[<>\"'&/]/g,function($){return '&#'+$.charCodeAt(0)+';'})}","s=typeof S ==='function'?S:function($){return S[$]}","v=function($){if($||$===0)r+=e($)}","u=function($){if($||$===0)r+=$}","l=function($){return t.call($)==='[object Array]'?$:$?[$]:[]}","i=function($){return t.call($)==='[object Array]'?$.length:$}","p=function(s,$,_){for($=s($),_=a.call(arguments,2);$!=null&&_.length;$=$[_.shift()]);return $}","c=function($,s){r+=_[$](s,e);};S=Object(S);"].join();if(null==t)throw new Error("Template required");for(t=String(t).replace(/[\n\r]/g,"\\n");i=f.exec(t);s=f.lastIndex)switch(p+=o(i[1]),i[3]){case"!":break;case"#":l.unshift([i[4]]),$++,p+="(function(a){for(var $,j=0,k=a.length,h=Object.prototype.hasOwnProperty;j<k;j++)(function(s){";break;case"^":l.unshift([i[4],1]),p+="if(!i("+a(i[4],$)+")){";break;case"/":if(!(c=l.shift())||c[0]!==i[4])throw new Error("Section mismatch");p+=c[1]?"}":$--&&"}(null==($=a[j])?s:function(_){return h.call($,_)?$[_]:s(_)}));}(l("+a(i[4],$)+")));";break;case">":p+=e(i[4]);break;case"=":if("="!==i[5])throw new Error("Delimiter mismatch");f=u.apply(f.lastIndex,i[4].split(/ +/,2));break;case"&":p+=r(a(i[4],$));break;default:p+=n(a(i[2],$))}return p+=o(t.slice(s)),p+"return r"}function l(n){return new Function("S",f(n))}function Stalin(n,r){return Stalin[n]=l(r)}Stalin._={escape:i,fn:l,compile:f},"object"==typeof module?module.exports=Stalin:window.Stalin=Stalin}();