!function(){"use strict";function n(n){return"v("+n+");"}function r(n){return"u("+n+");"}function t(n){return(1 in n?"p(s,'":"s('")+n.join("','")+"')"}function e(n){return n.replace(/[<>"'&\/]/g,i)}function i(n){return"&#"+n.charCodeAt(0)+";"}function u(n){return(n=n.replace(/'/g,"\\'"))?r("'"+n+"'"):""}function c(n,r){var t=new RegExp("(.*?)"+n+" *((?:([=&!#^>/]) *)?([\\S\\s]*?) *?(=)?) *"+r,"ig");return t.lastIndex=this,t}function o(e){function i(n){if("."===n[0]){if(s.length)return"$";throw new Error("Not in section")}return t(n.split("."))}var o,a,f=c.call(0,"{{","}}"),s=[],l=0,$=["var _=this,r='',y=r.replace,q=/[<>\"'&/]/g,x={}","a=Array.prototype.slice","t=x.toString","h=x.hasOwnProperty","e=function($){return y.call($,q,function($){return x[$]})}","s=typeof S ==='function'?S:function($){return S[$]}","v=function($){if($||$===0)r+=e($)}","u=function($){if($||$===0)r+=$}","l=function($){return t.call($)==='[object Array]'?$:$?[$]:[]}","i=function($){return t.call($)==='[object Array]'?$.length:$}","p=function(s,$,_){for($=s($),_=a.call(arguments,2);$!=null&&_.length;$=$[_.shift()]);return $}","d=function($,s){return function(_){return h.call($,_)?$[_]:s(_)}}","m=function($,s,f){for(var _=l($),j=0,k=_.length;j<k;)f(null==($=_[j++])?s:d($,s),$,u,v)};S=Object(S);'<>\"\\'&/'.split(r).map(function($){x[$]='&#'+$.charCodeAt(0)+';'});"].join();if(null==e)throw new Error("Template required");for(e=String(e).replace(/[\n\r]/g,"\\n");o=f.exec(e);l=f.lastIndex)switch($+=u(o[1]),o[3]){case"!":break;case"#":s.unshift([o[4]]),$+="m("+i(o[4])+",s,function(s,$,u,v){";break;case"^":s.unshift([o[4],1]),$+="if(!i("+i(o[4])+")){";break;case"/":if(!(a=s.shift())||a[0]!==o[4])throw new Error("Section mismatch");$+=a[1]?"}":"});";break;case">":$+="r+=_['"+o[4]+"'](s,e);";break;case"=":if("="!==o[5])throw new Error("Delimiter mismatch");f=c.apply(f.lastIndex,o[4].split(/ +/,2));break;case"&":$+=r(i(o[4]));break;default:$+=n(i(o[2]))}return $+=u(e.slice(l)),$+"return r"}function a(n){return new Function("S",o(n))}function f(n,r){return f[n]=a(r)}f._={escape:e,fn:a,compile:o},"object"==typeof module?module.exports=f:window.Stalin=f}();