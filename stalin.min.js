!function(){"use strict";function n(n){function t(n,t){c=RegExp("(.*?)"+n+" *((?:([=&!#^>/]) *)?([\\S\\s]*?) *?(=)?) *"+t,"ig"),c.lastIndex=this}function r(n,t){f+="uv"[~~t]+"("+n+");"}function e(n){(n=n.replace(/'/g,"\\'"))?r("'"+n+"'"):""}function i(n){if("."===n[0]){if(s.length)return"$";throw Error("Not in section")}return n=n.split("."),(1 in n?"p(s,'":"s('")+n.join("','")+"')"}var c,o,u,s=[],$=0,f=["var _=this,r='',q=/[<>\"'&/]/g,x={}","c=[].slice","t=x.toString","h=x.hasOwnProperty","e=function($){return String($).replace(q,function($){return x[$]})}","s=(typeof S)[1]<'u'?function($){return S[$]}:S","v=function($){if($||$===0)r+=e($)}","u=function($){if($||$===0)r+=$}","l=function($){return t.call($)[8]=='A'?$:$?[$]:[]}","i=function($){return t.call($)[8]=='A'?$.length:$}","p=function(s,$,_){for($=s($),_=c.call(arguments,2);$!=null&&_.length;$=$[_.shift()]);return $}","d=function($,s){return function(_){return h.call($,_)?$[_]:s(_)}}","m=function($,s,f){for(var _=l($),j=0,k=_.length;j<k;)f(null==($=_[j++])?s:d($,s),$)};S=Object(S);'<>\"\\'&/'.split(r).map(function($){x[$]='&#'+$.charCodeAt(0)+';'});"].join();if(t.call(0,"{{","}}"),null==n)throw Error("Template required");for(n=String(n).replace(/[\n\r]/g,"\\n");o=c.exec(n);$=c.lastIndex)switch(e(o[1]),o[3]){case"!":break;case"#":s.unshift([o[4]]),f+="m("+i(o[4])+",s,function(s,$){";break;case"^":s.unshift([o[4],1]),f+="if(!i("+i(o[4])+")){";break;case"/":if(!(u=s.shift())||u[0]!==o[4])throw Error("Section mismatch");f+=u[1]?"}":"});";break;case">":f+="r+=_['"+o[4]+"'](s,e);";break;case"=":if(!o[5])throw Error("Delimiter mismatch");t.apply(c.lastIndex,o[4].split(/ +/));break;case"&":r(i(o[4]));break;default:r(i(o[2]),1)}return e(n.slice($)),f+"return r"}function t(t){return Function("S",n(t))}function r(n,e){return r[n]=t(e)}r.compile=t,r.process=n,"object"==typeof module?module.exports=r:window.Stalin=r}();