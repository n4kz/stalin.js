!function(){"use strict";function n(n){function r(n){return i=RegExp("(.*?)"+n.join(" *((?:([=&!#^>/]) *)?([\\S\\s]*?) *?(=)?) *"),"g")}function t(n){n&&(f+="u('"+n.replace(/'/g,"\\'")+"');")}function e(n){if("."===n){if(0 in s)return"$";throw Error("Not in section")}return n=n.split("."),1 in n?"p(s('"+n.shift()+"'),['"+n.join("','")+"'])":"s('"+n+"')"}var i,o,u,c,s=[],f="var _=this,r='',q=/[<>\"'&/]/g,x={},t=x.toString,h=x.hasOwnProperty,e=function($){return String($).replace(q,function($){return x[$]})},s=/^f/.test(typeof S)?S:function($){return S[$]},v=function($){if($||$===0)r+=e($)},u=function($){if($||$===0)r+=$},l=function($){return t.call($)[8]=='A'?$:$?[$]:[]},i=function($){return t.call($)[8]=='A'?$.length:$},p=function($,s){for(var j=0,l=s.length;$!=null&&j<l;$=$[s[j++]]);return $},d=function($,s){return function(_){return h.call($,_)?$[_]:s(_)}},m=function($,s,f){for(var _=l($),j=0,k=_.length;j<k;)f(null==($=_[j++])?s:d($,s),$)};S=Object(S);'<>\"\\'&/'.replace(/./g,function($){x[$]='&#'+$.charCodeAt(0)+';'});";if(null==n)throw Error("Template required");for(n=String(n).replace(/[\n\r]/g,"\\n"),r(["{{","}}"]);o=i.exec(n);)switch(c=i.lastIndex,t(o[1]),o[3]){case"!":break;case"#":s.unshift([o[4]]),f+="m("+e(o[4])+",s,function(s,$){";break;case"^":s.unshift([o[4],1]),f+="if(!i("+e(o[4])+")){";break;case"/":if(!(u=s.shift())||u[0]!==o[4])throw Error("Section mismatch");f+=u[1]?"}":"});";break;case">":f+="r+=_['"+o[4]+"'](s,e);";break;case"=":if(!o[5])throw Error("Delimiter mismatch");r(o[4].split(/ +/)).lastIndex=c;break;case"&":f+="u("+e(o[4])+");";break;default:f+="v("+e(o[2])+");"}return t(n.slice(c)),f+"return r"}function r(r){return Function("S",n(r))}function t(n,e){return t[n]=r(e)}t.compile=r,t.process=n,"object"==typeof module?module.exports=t:window.Stalin=t}();